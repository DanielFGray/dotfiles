#!/usr/bin/env bash

inTerm() {
  [[ -t 0 || -p /dev/stdin ]]
}

isRunning() {
  pgrep $1
}

info() {
  if inTerm; then
    echo -e "\e[34m$1\e[0m" >&2
  else
    zenity --info --text="$*"
  fi
}

err() {
  if inTerm; then
    echo -e "\e[31m$1\e[0m" >&2
  else
    zenity --error --text="$*"
  fi
}

die() {
  [[ -n "$1" ]] && err "$1"
  exit 1
}

has() {
  verbose=false
  if [[ $1 == '-v' ]]; then
    verbose=true
    shift
  fi
  if command -v "$1" &> /dev/null; then
    return 0
  else
    [[ "$verbose" == true ]] && err "$1 not found"
    return 1
  fi
}

ask() {
  if inTerm; then
    read -n1 -p "$* " ans
    echo
    [[ ${ans^} == Y* ]]
  else
    zenity --question --text="$@"
  fi
}
