#!/usr/bin/env bash

if [[ -e "${HOME}/.bash_utils" ]]; then
  source "${HOME}/.bash_utils"
else
  printf '\e[31mbash_utils not found\e[0m\n' >&2
  exit 1
fi

declare -a cmds

if tmux ls &> /dev/null; then
  cmds=( tmux attach )
else
  if has tmuxinator; then
    cmds=( tmuxinator start main )
  else
    cmds=( tmux )
  fi
fi

xrdb -load ~/.Xresources
if in_term; then
  exec "${cmds[@]}"
else
  exec x-terminal-emulator -e ${cmds[*]}
fi
